---
title: "Data Cleaning"
format: html
editor: visual
---

```{r}
library(tidyverse)
library(readxl)
```

# World Values Survey

These data are sourced from the [World Values Survey Wave 7 (2017-2022)](https://www.worldvaluessurvey.org/WVSDocumentationWV7.jsp), accessed March 26, 2023.

```{r}
wvs_raw <- read_csv("../WVS_Wave7.csv")
```

```{r}
head(wvs_raw)
```

First, we need to select only the nine countries analyzed by Jacobson (2017). These are those countries and their WVS Country Codes:

 - Kenya (404)
 - South Africa (710)
 - Brazil (76)
 - the United States (840)
 - India (356)
 - Thailand (764)
 - England and Wales (Great Britain, 826)
 - Hungary (348)
 - the Netherlands (528)
 - Australia (36)

Now, let's filter for `B_COUNTRY` values that match these codes. Unfortunately, I encountered an error in which it WON'T FILTER "OR" VALUES WHICH IS EVIL. So to solve that, I've made different dataframes for each country and combined them.

```{r}
# creating data frames for each country

wvs_kenya <- wvs_raw %>% 
  filter(B_COUNTRY == 404) #filter by country code

wvs_safrica <- wvs_raw %>% 
  filter(B_COUNTRY == 710)

wvs_brazil <- wvs_raw %>% 
  filter(B_COUNTRY == 76)

wvs_us <- wvs_raw %>% 
  filter(B_COUNTRY == 840)

wvs_india <- wvs_raw %>% 
  filter(B_COUNTRY == 356)

wvs_thailand <- wvs_raw %>% 
  filter(B_COUNTRY == 764)

wvs_britain <- wvs_raw %>% 
  filter(B_COUNTRY == 826)

wvs_hungary <- wvs_raw %>% 
  filter(B_COUNTRY == 348)

wvs_netherlands <- wvs_raw %>% 
  filter(B_COUNTRY == 528)

wvs_australia <- wvs_raw %>% 
  filter(B_COUNTRY == 36)
```

Looking at the observations from these dataframes, it appears that Hungary, India, and South Africa do not have results from the WVS Wave 7. Therefore, before joining the separate countries into one dataframe, we need to import data from earlier WVS.

```{r}
wvs_hungary <- read_xlsx("raw-data/WV5_Hungary.xlsx")
wvs_india <- read_xlsx("raw-data/WV6_India.xlsx")
wvs_safrica <- read_xlsx("raw-data/WV6_South_Africa.xlsx")
```

```{r}
# join all of the separate country dataframes

wvs_country <- wvs_kenya %>% 
  full_join(wvs_safrica) %>% 
  full_join(wvs_brazil) %>% 
  full_join(wvs_us) %>% 
  full_join(wvs_india) %>% 
  full_join(wvs_thailand) %>% 
  full_join(wvs_britain) %>% 
  full_join(wvs_hungary) %>% 
  full_join(wvs_netherlands) %>% 
  full_join(wvs_australia)

```



# References

Haerpfer, Christian, Ronald Inglehart, Alejandro Moreno, Christian Welzel, Kseniya Kizilova, Jaime Diez-Medrano, Marta Lagos, Pippa Norris, Eduard Ponarin, and Bi Puranen. 2022. “World Values Survey Wave 7 (2017-2022) Cross-National Data-Set.” *World Values Survey*. Retrieved March 26, 2023 (https://www.worldvaluessurvey.org/WVSDocumentationWV7.jsp).

Ingelhart, Ronald, Christian W. Haerpfer, Alejandro Moreno, Christian Welzel, Kseniya Kizilova, Jaime Diez-Medrano, Marta Lagos, Pippa Norris, Eduard Ponarin, and Bi Puranen. 2014. “World Values Survey Wave 6 (2010-2014).” *World Values Survey.* Retrieved March 26, 2023 (https://www.worldvaluessurvey.org/WVSDocumentationWV6.jsp).

Ingelhart, Ronald, Christian W. Haerpfer, Alejandro Moreno, Christian Welzel, Kseniya Kizilova, Jaime Diez-Medrano, Marta Lagos, Pippa Norris, Eduard Ponarin, and Bi Puranen. 2020. “World Values Survey Wave 5 (2005-2009).” *World Values Survey.* Retrieved March 26, 2023 (https://www.worldvaluessurvey.org/WVSDocumentationWV6.jsp).

